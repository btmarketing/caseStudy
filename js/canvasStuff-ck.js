////////////////////////////////////////////////
////////////////////////////////////////////////
////////////////////////////////////////////////
function initCanvas(){canvas=document.getElementById("canvas");context=canvas.getContext("2d");canvas.width=unitSize*10;canvas.height=unitSize*5}function drawSeeding(){console.log(packets.length);if(frameCount%packetInterval===0&&addPackets){var e=buckets[currentNavigation],t=e.titleBox.x-center.left,n=e.titleBox.y-center.top;for(var r=0;r<e.contentBoxes.length;r++){var i=e.contentBoxes[r].x-center.left,s=e.contentBoxes[r].y-center.top,o=new Packet(t,n,i,s);packets.push(o);if(e.contentBoxes[r].sinCount>-Math.PI*.25&&e.contentBoxes[r].sinCount<Math.PI*.25)for(var u=0;u<e.contentBoxes.length;u++)if(r!==u){var a=e.contentBoxes[u].x-center.left,f=e.contentBoxes[u].y-center.top,l=new Packet(i,s,a,f,r);packets.push(l)}}}frameCount++;updateCurrentPackets()}function updateCurrentPackets(){context.globalAlpha=1;if(packets.length>0){context.clearRect(0,0,canvas.width,canvas.height);for(var e=0;e<packets.length;e++){packets[e].step();packets[e].paint();if(packets[e].arrived){packets.splice(e,1);e--}}}}function findAngle(e,t,n,r){var i=0,s=n-e,o=r-t,u=Math.sqrt(Math.pow(s,2)+Math.pow(o,2)),a=Math.sin(Math.PI*.5),f,l;if(s>=0&&o<=0){f=Math.abs(s);l=0}else if(s>=0&&o>=0){f=Math.abs(o);l=Math.PI*.5}else if(s<=0&&o>=0){f=Math.abs(s);l=Math.PI}else if(s<=0&&o<=0){f=Math.abs(o);l=Math.PI*1.5}var c=a*f;i=Math.asin(c/u)+l;i||(i=0);return i}function Packet(e,t,n,r,i){this.x=e;this.y=t;this.totalDiff=Math.sqrt(Math.pow(n-e,2)+Math.pow(r-t,2));this.rot=findAngle(e,t,n,r)+Math.PI;this.waves=Math.floor(Math.random()*7)+3;this.stepAmount=Math.floor(Math.random()*20)+60;this.currentStep=0;this.waveHeight=this.totalDiff*Math.pow(Math.random()*.3,2);this.arrived=!1;this.size=Math.floor(Math.pow(Math.random()*2,2)+3);this.colorIndex=i}var canvas,context,frameCount=0,packetInterval=5,packets=[],addPackets=!1;Packet.prototype.step=function(){this.currentStep++;this.currentStep===this.stepAmount&&(this.arrived=!0)};Packet.prototype.paint=function(){var e=this.currentStep/this.stepAmount*this.waves,t=(Math.sin((this.currentStep/this.stepAmount*2-1)*Math.PI*.5)*.5+.5)*this.totalDiff,n=Math.sin(e)*this.waveHeight,r=Math.sin(this.currentStep/this.stepAmount*Math.PI)*.6;context.translate(this.x,this.y);context.rotate(this.rot);context.globalAlpha=r;context.fillStyle="purple";context.beginPath();context.arc(n,t,this.size,0,2*Math.PI,!1);context.fill();context.rotate(-this.rot);context.translate(-this.x,-this.y)};