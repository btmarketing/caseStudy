////////////////////////////////////////////////
////////////////////////////////////////////////
////////////////////////////////////////////////
function startBerkeley(){berkeley_vis.selectAll("path").transition().duration(function(e,t){return 100*t+300}).attr("d",function(e,t){return berkeley_triangle(e,t,berkeley_smallScale)})}function endBerkeley(){berkeley_vis.selectAll("path").attr("d",function(e,t){return berkeley_triangle(e,t,0)})}function berkeley_triangle(e,t,n){var r=berkeley_xScale(t),i=berkeley_h-berkeley_dateHeight,s=berkeley_w/berkeley_data.length*1.5,o=(e.value-berkeley_min)/berkeley_diff*1,u=o*(berkeley_h-berkeley_dateHeight)*n,a="M "+Math.floor(r-s/2)+" "+i+" l "+s+" 0 l "+ -s/2+" "+ -u+" z";return a}function berkeley_xScale(e){return(berkeley_w-40)/berkeley_data.length*e+berkeley_w/berkeley_data.length/4+26}function openBerkeleyBar(e,t){d3.select("#berkeley_path_"+t).transition().ease("bounce").duration(100).attr("opacity",1).attr("d",function(e,n){return berkeley_triangle(e,t,1)});d3.select("#berkeley_inner_"+t).transition().duration(200).attr("r",18);d3.select("#berkeley_outer_"+t).transition().duration(300).attr("r",25);d3.select("#berkeley_value"+t).transition().duration(500).attr("opacity",1);d3.select("#berkeley_date_"+t).transition().duration(200).attr("fill","white")}function closeBerkeleyBar(e){d3.select("#berkeley_path_"+e).transition().duration(1e3).ease("bounce").attr("opacity",.6).attr("d",function(t,n){return berkeley_triangle(t,e,berkeley_smallScale)});d3.select("#berkeley_value"+e).transition().duration(100).attr("opacity",0);d3.select("#berkeley_inner_"+e).transition().duration(200).attr("r",0);d3.select("#berkeley_outer_"+e).transition().duration(100).attr("r",0);d3.select("#berkeley_date_"+e).transition().duration(200).attr("fill","rgb(140,120,220)")}var berkeleyDisplay=!1;setInterval(function(){if(document.getElementById("berkeleyGraph").offsetWidth){if(!berkeleyDisplay){berkeleyDisplay=!0;startBerkeley()}}else if(berkeleyDisplay){berkeleyDisplay=!1;endBerkeley()}},500);var berkeley_w=unitSize*4-gutter*2,berkeley_h=unitSize*2-gutter*2,berkeley_r=80,berkeley_vis=d3.select("#berkeleyGraph").append("svg:svg").attr("id","berkeleySVG").attr("width",berkeley_w).attr("height",berkeley_h),berkSVG=document.getElementById("berkeleyGraph");berkSVG.style.position="absolute";berkSVG.style.left="0px";berkSVG.style.top="0px";var berkeley_data=[{label:"6.6",value:69612},{label:"6.7",value:143726},{label:"6.8",value:157271},{label:"6.9",value:149027},{label:"6.10",value:138174},{label:"6.11",value:135456},{label:"6.12",value:139275},{label:"6.13",value:138613},{label:"6.14",value:143478},{label:"6.15",value:151220},{label:"6.16",value:144100},{label:"6.17",value:137351},{label:"6.18",value:134479},{label:"6.19",value:85173}],berkeley_max=2e5,berkeley_min=0,berkeley_diff=berkeley_max-berkeley_min,berkeley_smallScale=.5,berkeley_dateHeight=20,berkeley_paths=berkeley_vis.selectAll("path").data(berkeley_data).enter().append("path").attr("d",function(e,t){return berkeley_triangle(e,t,0)}).attr("id",function(e,t){return"berkeley_path_"+t}).attr("fill","rgb(115,99,170)").attr("opacity",.6).on("mouseover",function(e,t){var n=e,r=t;openBerkeleyBar(n,r)}).on("mouseout",function(e,t){var n=t;closeBerkeleyBar(n)});berkeley_vis.selectAll("circle.berkeley_inner").data(berkeley_data).enter().append("circle").attr("class","berkeley_inner").attr("id",function(e,t){return"berkeley_inner_"+t}).attr("fill","white").attr("opacity",.2).attr("cx",function(e,t){return berkeley_xScale(t)}).attr("cy",function(e,t){var n=(e.value-berkeley_min)/berkeley_diff*1;return berkeley_h-berkeley_dateHeight-n*(berkeley_h-berkeley_dateHeight)-3}).attr("r",0);berkeley_vis.selectAll("circle.berkeley_outer").data(berkeley_data).enter().append("circle").attr("class","berkeley_outer").attr("id",function(e,t){return"berkeley_outer_"+t}).attr("fill","white").attr("opacity",.1).attr("cx",function(e,t){return berkeley_xScale(t)}).attr("cy",function(e,t){var n=(e.value-berkeley_min)/berkeley_diff*1;return berkeley_h-berkeley_dateHeight-n*(berkeley_h-berkeley_dateHeight)-3}).attr("r",0);berkeley_vis.selectAll("text.berkeley_value_graph").data(berkeley_data).enter().append("text").attr("text-anchor","middle").text(function(e,t){return Math.floor(e.value/1e3)+"k"}).attr("x",function(e,t){return berkeley_xScale(t)}).attr("y",function(e,t){var n=(e.value-berkeley_min)/berkeley_diff*1;return berkeley_h-berkeley_dateHeight-n*(berkeley_h-berkeley_dateHeight)+1}).attr("fill","white").attr("opacity",0).attr("font-size","13px").attr("class","berkeley_value_graph").attr("id",function(e,t){return"berkeley_value"+t}).attr("font-family","Helvetica");berkeley_vis.selectAll("text.berkeley_date").data(berkeley_data).enter().append("text").attr("class","berkeley_date").attr("id",function(e,t){return"berkeley_date_"+t}).attr("fill","rgb(140,120,220)").attr("font-size",10).attr("text-anchor","middle").attr("x",function(e,t){return berkeley_xScale(t)}).attr("y",function(){return berkeley_h-berkeley_dateHeight/2}).text(function(e){return e.label});