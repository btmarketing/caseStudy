////////////////////////////////////////////////
////////////////////////////////////////////////
////////////////////////////////////////////////
function startBerkeley(){berkeley_vis.selectAll("rect").transition().duration(function(e,t){return 100*t+300}).attr("height",function(e){var t=(e.value-berkeley_min)/berkeley_diff*1;return t*berkeley_h}).attr("y",function(e,t){var n=(e.value-berkeley_min)/berkeley_diff*1;return berkeley_h-n*berkeley_h})}function endBerkeley(){berkeley_vis.selectAll("rect").attr("height",0).attr("y",function(e,t){return berkeley_h})}function openBerkeleyBar(e,t){d3.select("#berkeley_rect_"+t).attr("height",function(e){var t=(e.value-berkeley_min)/berkeley_diff*1;return t*berkeley_h}).attr("y",function(e,t){var n=(e.value-berkeley_min)/berkeley_diff*1;return berkeley_h-n*berkeley_h}).transition().duration(100).attr("fill","rgb(165,149,220)").attr("width",function(){return berkeley_w/berkeley_data.length*1.1}).attr("x",function(e,n){return berkeley_w/berkeley_data.length*t-berkeley_w/berkeley_data.length*.066});d3.select("#berkeley_date"+t).transition().duration(500).attr("opacity",1);d3.select("#berkeley_value"+t).transition().duration(500).attr("opacity",1)}function closeBerkeleyBar(e){d3.select("#berkeley_rect_"+e).transition().duration(300).attr("fill","rgb(85,69,140)").attr("width",function(){return berkeley_w/berkeley_data.length/2}).attr("x",function(t,n){return berkeley_w/berkeley_data.length*e+berkeley_w/berkeley_data.length/4});d3.select("#berkeley_date"+e).transition().duration(100).attr("opacity",0);d3.select("#berkeley_value"+e).transition().duration(100).attr("opacity",0)}var berkeleyDisplay=!1;setInterval(function(){if(document.getElementById("berkeleyGraph").offsetWidth){if(!berkeleyDisplay){berkeleyDisplay=!0;startBerkeley()}}else if(berkeleyDisplay){berkeleyDisplay=!1;endBerkeley()}},500);var berkeley_w=unitSize*4-gutter*2,berkeley_h=unitSize*2-gutter*2,berkeley_r=80,berkeley_vis=d3.select("#berkeleyGraph").append("svg:svg").attr("id","berkeleySVG").attr("width",berkeley_w).attr("height",berkeley_h),berkeley_data=[{label:"June 6",value:69612},{label:"June 7",value:143726},{label:"June 8",value:157271},{label:"June 9",value:149027},{label:"June 10",value:138174},{label:"June 11",value:135456},{label:"June 12",value:139275},{label:"June 13",value:138613},{label:"June 14",value:143478},{label:"June 15",value:151220},{label:"June 16",value:144100},{label:"June 17",value:137351},{label:"June 18",value:134479},{label:"June 19",value:85173}],berkeley_max=2e5,berkeley_min=0,berkeley_diff=berkeley_max-berkeley_min,berkeley_rects=berkeley_vis.selectAll("rect").data(berkeley_data).enter().append("rect").attr("id",function(e,t){return"berkeley_rect_"+t}).attr("width",function(){return berkeley_w/berkeley_data.length/2}).attr("height",0).attr("x",function(e,t){return berkeley_w/berkeley_data.length*t+berkeley_w/berkeley_data.length/4}).attr("y",berkeley_h).attr("fill","rgb(85,69,140)").on("mouseover",function(e,t){var n=e,r=t;openBerkeleyBar(n,r)}).on("mouseout",function(e,t){var n=t;closeBerkeleyBar(n)});berkeley_vis.selectAll(".date").data(berkeley_data).enter().append("text").attr("text-anchor","left").text(function(e,t){return e.label}).attr("transform",function(e,t){var n=berkeley_w/berkeley_data.length*t+berkeley_w/berkeley_data.length/2,r=berkeley_h-10;return"translate("+n+","+r+") rotate(-90)"}).attr("x",-5).attr("y",5).attr("fill","rgb(85,69,140)").attr("opacity",0).attr("font-size","18px").attr("class","date").attr("id",function(e,t){return"berkeley_date"+t}).attr("font-family","Helvetica").on("mouseover",function(e,t){var n=e,r=t;openBerkeleyBar(n,r)}).on("mouseout",function(e,t){var n=t;closeBerkeleyBar(n)});berkeley_vis.selectAll(".value").data(berkeley_data).enter().append("text").attr("text-anchor","middle").text(function(e,t){return Math.floor(e.value/1e3)+""}).attr("x",function(e,t){return berkeley_w/berkeley_data.length*t+berkeley_w/berkeley_data.length/4+6}).attr("y",function(e,t){var n=(e.value-berkeley_min)/berkeley_diff*1;return berkeley_h-n*berkeley_h-3}).attr("fill","rgb(85,69,140)").attr("opacity",0).attr("font-size","22px").attr("class","value").attr("id",function(e,t){return"berkeley_value"+t}).attr("font-family","Helvetica");