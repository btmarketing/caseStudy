////////////////////////////////////////
////////////////////////////////////////
////////////////////////////////////////
function kaskade_cancelAllTransitions(){kaskade_vis.selectAll("rect.kaskade_rect").each(function(){var e=this.__transition__;e&&(e.active=0)});kaskade_vis.selectAll("text").each(function(){var e=this.__transition__;e&&(e.active=0)})}function kaskade_mouseover(){kaskade_cancelAllTransitions();kaskade_vis.select("rect.kaskade_overlay").transition().duration(200).attr("opacity",0).each("end",kaskade_revealData)}function kaskade_mouseout(){kaskade_cancelAllTransitions();kaskade_hideData();kaskade_vis.select("rect.kaskade_overlay").transition().duration(200).attr("opacity",.3)}function kaskade_powerOn(){kaskade_vis.select("rect.kaskade_overlay").attr("opacity",0);kaskade_vis.selectAll("rect.kaskade_fadeInX").transition().delay(1e3).duration(500).ease("cubic-out").attr("x",function(e){return e===0?-kaskade_w/2:kaskade_w}).each("end",function(){kaskade_vis.selectAll("rect.kaskade_fadeInY").transition().duration(300).ease("cubic-out").attr("y",function(e){return e===0?-kaskade_h/2:kaskade_h}).each("end",function(){kaskade_vis.select("rect.kaskade_overlay").transition().duration(400).attr("opacity",.3)})})}function kaskade_powerOff(){kaskade_vis.selectAll("rect.kaskade_fadeInX").attr("x",function(e){return e===0?-1:kaskade_w/2+1});kaskade_vis.selectAll("rect.kaskade_fadeInY").attr("y",function(e){return e===0?-1:kaskade_h/2+1})}function kaskade_revealData(){kaskade_vis.selectAll("rect.kaskade_rect").transition().duration(100).attr("opacity",.7).each("end",function(){kaskade_vis.selectAll("text.kaskade_text").transition().duration(200).attr("x",function(){return kaskade_w/2})})}function kaskade_hideData(){kaskade_vis.selectAll("text.kaskade_text").attr("x",function(e,t){var n=1;t===0&&(n=-1);return kaskade_w/2+kaskade_w*n});kaskade_vis.selectAll("rect.kaskade_rect").transition().duration(500).attr("opacity",0)}var kaskade_w=unitSize*4-gutter*2,kaskade_h=unitSize*2-gutter*2,kaskade_vis=d3.select("#kaskadeGraph_div").append("svg").attr("width",kaskade_w).attr("height",kaskade_h).attr("id","kaskade_svg"),kaskadeSVG=document.getElementById("kaskade_svg");kaskadeSVG.style.position="absolute";kaskadeSVG.style.left="0px";kaskadeSVG.style.top="0px";var kaskade_data=[{value:35e5,label:"BitTorrent",percentage:.81,color:"#9184bd"},{value:68e4,label:"YouTube",percentage:.19,color:"#594c81"}];kaskade_vis.selectAll("rect.kaskade_rect").data(kaskade_data).enter().append("rect").attr("class","kaskade_rect").attr("id",function(e,t){return"kaskade_rect_"+t}).attr("y",function(e,t){return(kaskade_h-kaskade_h*e.percentage)*t}).attr("x",0).attr("width",kaskade_w).attr("height",function(e){return kaskade_h*e.percentage+2}).attr("fill",function(e){return e.color}).attr("opacity",0);kaskade_vis.selectAll("text.kaskade_text").data(kaskade_data).enter().append("text").attr("class","kaskade_text").attr("id",function(e,t){return"kaskade_text_"+t}).attr("fill","white").attr("text-anchor","middle").attr("x",function(e,t){var n=1;t===0&&(n=-1);return kaskade_w/2+kaskade_w*n}).attr("y",function(e,t){return(kaskade_h-kaskade_h*e.percentage)*t+kaskade_h*e.percentage*.5+6}).text(function(e){return e.label==="BitTorrent"?e.value/1e6+" million views on BitTorrent":e.value/1e3+"k on "+e.label}).attr("font-size",20);kaskade_vis.selectAll("rect.kaskade_fadeInX").data([0,1]).enter().append("rect").attr("class","kaskade_fadeInX").attr("fill","black").attr("height",kaskade_h).attr("width",function(){return kaskade_w/2}).attr("y",0).attr("x",function(e){return e===0?-1:kaskade_w/2+1});kaskade_vis.selectAll("rect.kaskade_fadeInY").data([0,1]).enter().append("rect").attr("class","kaskade_fadeInY").attr("fill","black").attr("height",kaskade_h/2).attr("width",kaskade_w).attr("x",0).attr("y",function(e){return e===0?-1:kaskade_h/2+1});kaskade_vis.append("rect").attr("class","kaskade_overlay").attr("opacity",0).attr("x",0).attr("y",0).attr("width",kaskade_w).attr("height",kaskade_h).on("mouseover",kaskade_mouseover).on("mouseout",kaskade_mouseout);var kaskade_position=0,kaskadeDisplay=!1;setInterval(function(){if(document.getElementById("kaskadeGraph_div").offsetWidth){if(!kaskadeDisplay){kaskadeDisplay=!0;kaskade_powerOn()}}else if(kaskadeDisplay){kaskadeDisplay=!1;kaskade_powerOff()}},500);